.internal-sidebar {
	position: fixed;
	top: 0;
	left: 0;
	bottom: 0;
	width: 240px;
	background: rgba(18, 18, 18, 0.92); /* Dark mode: dark grey background */
	backdrop-filter: blur(12px) saturate(120%);
	-webkit-backdrop-filter: blur(12px) saturate(120%);
	border-right: 1px solid rgba(255,255,255,0.08);
	box-shadow: 0 0 40px rgba(0,0,0,0.6);
	z-index: 1000;
	transition: width 180ms ease;
	display: none;
}

.internal-sidebar__inner {
	height: 100%;
	display: grid;
	grid-template-rows: auto 1fr;
	row-gap: 8px;
	padding: calc(env(safe-area-inset-top) + 10px) 10px 10px 10px;
}

.internal-sidebar__toggle {
	appearance: none;
	border: 1px solid rgba(255,255,255,0.18);
	background: rgba(255,255,255,0.06);
	color: #ffffff;
	border-radius: 10px;
	width: 44px;
	height: 44px;
	display: inline-flex;
	align-items: center;
	justify-content: center;
	cursor: pointer;
}
.internal-sidebar__toggle .is-collapsed { transform: rotate(180deg); transition: transform 160ms ease; }

.internal-sidebar__nav {
	display: grid;
	align-content: start;
	gap: 8px;
}

.internal-sidebar__link {
	display: grid;
	grid-template-columns: 24px 1fr;
	align-items: center;
	justify-items: start;
	gap: 10px;
	padding: 10px 12px;
	color: #ffffff;
	text-decoration: none;
	border-radius: 12px;
	background: rgba(255,255,255,0.06);
	border: 1px solid rgba(255,255,255,0.14);
	box-shadow: 0 10px 24px rgba(0,0,0,0.4), 0 1px 0 rgba(255,255,255,0.05) inset;
	transition: background-color 160ms ease, transform 120ms ease, border-color 160ms ease;
}

.internal-sidebar__link svg {
	color: #ffffff;
	fill: currentColor;
	stroke: currentColor;
}
.internal-sidebar__link:hover { background: rgba(255,255,255,0.1); transform: translateY(-1px); }
.internal-sidebar__link:active { transform: translateY(0); }
.internal-sidebar__link.is-active { border-color: rgba(255, 165, 0, 0.9); box-shadow: 0 0 0 2px rgba(255, 165, 0, 0.45), 0 10px 24px rgba(0,0,0,0.4); }

.internal-sidebar__icon { 
	display: flex !important; 
	align-items: center !important; 
	justify-content: center !important; 
	width: 24px; 
	height: 24px; 
	flex-shrink: 0; 
	opacity: 0.95; 
	justify-self: center !important;
	color: #ffffff;
}

/* Force icon centering across all pages - Enhanced with stronger specificity */
.internal-sidebar .internal-sidebar__nav .internal-sidebar__link > span:first-child,
.internal-sidebar__link > span:first-child {
	display: flex !important;
	align-items: center !important;
	justify-content: center !important;
	justify-self: center !important;
	width: 24px !important;
	height: 24px !important;
	flex-shrink: 0 !important;
	position: relative !important;
}

/* Additional centering for nested icon elements */
.internal-sidebar .internal-sidebar__nav .internal-sidebar__link > span:first-child > *,
.internal-sidebar__link > span:first-child > * {
	display: block !important;
	margin: 0 auto !important;
	text-align: center !important;
}
.internal-sidebar__label { white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }

/* Collapsed state - Enhanced with stronger icon centering */
.internal-sidebar.internal-sidebar--collapsed { width: 72px; }
.internal-sidebar.internal-sidebar--collapsed .internal-sidebar__link { 
	grid-template-columns: 24px; 
	justify-items: center !important;
	align-items: center !important;
}
.internal-sidebar.internal-sidebar--collapsed .internal-sidebar__link > span:first-child {
	justify-self: center !important;
	align-self: center !important;
}
.internal-sidebar.internal-sidebar--collapsed .internal-sidebar__label { display: none; }

/* Content offset helper when sidebar is visible on desktop */
.internal-app-shell { display: block; }
.internal-app-content { margin-left: 0; transition: margin-left 180ms ease; }

@media (min-width: 1025px) {
	.internal-sidebar { display: block; }
	.internal-app-shell { display: flex; }
	/* When the sidebar is present, offset content by expanded width by default */
    .internal-app-content { margin-left: 240px; width: calc(100% - 240px); position: relative; }
	/* When sidebar is collapsed, adjust content offset */
	body.sidebar-collapsed .internal-app-content { margin-left: 72px; width: calc(100% - 72px); }
}

/* Light mode adjustments */
#root.internal-bg--light .internal-sidebar {
	background: rgba(220, 120, 60, 0.88); /* Light mode: lighter orange background */
	border-right: 1px solid rgba(0,0,0,0.08);
	box-shadow: 0 0 40px rgba(0,0,0,0.12);
}
#root.internal-bg--light .internal-sidebar__link {
	background: rgba(0,0,0,0.04);
	border: 1px solid rgba(0,0,0,0.12);
	color: #111111;
}

#root.internal-bg--light .internal-sidebar__link svg {
	color: #111111;
	fill: currentColor;
	stroke: currentColor;
}

#root.internal-bg--light .internal-sidebar__icon {
	color: #111111;
}
#root.internal-bg--light .internal-sidebar__link.is-active { border-color: rgba(255, 165, 0, 0.9); }

/* Page-agnostic icon centering override - Final defense against page-specific CSS conflicts */
.chopping-page-root .internal-sidebar__link > span:first-child,
.profile-page-root .internal-sidebar__link > span:first-child,
.account-page-root .internal-sidebar__link > span:first-child,
body .internal-sidebar__link > span:first-child {
	display: flex !important;
	align-items: center !important;
	justify-content: center !important;
	justify-self: center !important;
	width: 24px !important;
	height: 24px !important;
	flex-shrink: 0 !important;
}

/* Ensure SVG icons are properly centered within spans with proper colors */
.internal-sidebar__link > span:first-child > svg {
	display: block !important;
	margin: 0 auto !important;
	width: 20px !important;
	height: 20px !important;
	color: #ffffff !important;
	fill: currentColor !important;
	stroke: currentColor !important;
}

/* Light mode icon colors */
#root.internal-bg--light .internal-sidebar__link > span:first-child > svg {
	color: #111111 !important;
}


